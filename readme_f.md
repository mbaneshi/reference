
# مرجع زبان راست

این سند مرجع اصلی زبان برنامه‌نویسی راست است.

این سند معیار نیست. ممکن است شامل جزئیاتی باشد که مختص خود `rustc` است و نباید به عنوان مشخصه‌ای برای زبان راست در نظر گرفته شود. ما قصد داریم روزی چنین سندی تولید کنیم، اما این چیزی است که در حال حاضر داریم.

## وابستگی‌ها

- راست شبانه
- [mdbook](https://rust-lang.github.io/mdBook/)

## نصب وابستگی‌ها

ابتدا مطمئن شوید که نسخه‌ای جدید از کامپایلر راست شبانه نصب شده است، زیرا این برای اجرای تست‌ها ضروری است:

```sh
rustup toolchain install nightly
```

اکنون مطمئن شوید که `mdbook` نصب شده است، زیرا این برای ساخت مرجع ضروری است:

```sh
cargo install --locked mdbook
```

## ساخت

برای ساخت مرجع، ابتدا پروژه را کلون کنید:

```sh
git clone https://github.com/rust-lang/reference.git
```

(به‌عنوان یک گزینه، اگر نمی‌خواهید از `git` استفاده کنید، [دانلود][] یک فایل ZIP از پروژه، آن را با ابزار مورد نظر خود استخراج کرده و دایرکتوری سطح بالا را به `reference` تغییر نام دهید.)

[دانلود]: https://github.com/rust-lang/reference/archive/refs/heads/master.zip

اکنون دایرکتوری فعلی خود را به دایرکتوری کاری تغییر دهید:

```sh
cd reference
```

برای تست تمام نمونه‌های کد موجود در مرجع، اجرا کنید:

```sh
mdbook test
```

برای نویسندگان، استفاده از قابلیت سرور که پشتیبانی از بارگذاری خودکار دارد را در نظر بگیرید.

برای ساخت مرجع به‌صورت محلی (در `build/`) و باز کردن آن در مرورگر وب، اجرا کنید:

```sh
SPEC_RELATIVE=0 mdbook build --open
```

این عمل یک مرورگر با یک لینک زنده وب‌ساکت باز خواهد کرد که به‌طور خودکار هر بار که منبع به‌روزرسانی شود، بارگذاری مجدد می‌شود.

شما همچنین می‌توانید از گزینه وب‌سرور زنده mdbook استفاده کنید که به‌طور خودکار کتاب را بازسازی کرده و مرورگر وب شما را هر بار که یک فایل منبع تغییر کند، بارگذاری مجدد می‌کند:

```sh
SPEC_RELATIVE=0 mdbook serve --open
```

### `SPEC_RELATIVE`

متغیر محیطی `SPEC_RELATIVE=0` لینک‌ها به کتابخانه استاندارد را به <https://doc.rust-lang.org> می‌برد به جای اینکه نسبی باشد، که این برای مشاهده به‌صورت محلی مفید است زیرا معمولاً نسخه‌ای از کتابخانه استاندارد ندارید.

سایت منتشر شده در <https://doc.rust-lang.org/reference> (یا مستندات محلی با استفاده از `rustup doc`) این را تنظیم نمی‌کند، به این معنی که از لینک‌های نسبی استفاده می‌کند که پشتیبانی از مشاهده آفلاین و لینک به نسخه صحیح (برای مثال، لینک‌ها در <https://doc.rust-lang.org/1.81.0/reference/> در دایرکتوری 1.81.0 باقی خواهند ماند).

### `SPEC_DENY_WARNINGS`

متغیر محیطی `SPEC_DENY_WARNINGS=1` تمام هشدارهای تولید شده توسط `mdbook-spec` را به خطا تبدیل می‌کند. این در CI برای اطمینان از عدم وجود مشکلات با محتوای کتاب استفاده می‌شود.

### `SPEC_RUST_ROOT`

متغیر `SPEC_RUST_ROOT` می‌تواند به دایرکتوری یک چک‌اوت از <https://github.com/rust-lang/rust> اشاره کند. این برای ویژگی تست‌لینک استفاده می‌شود تا بتواند تست‌های مرتبط با قوانین مرجع را پیدا کند. اگر این تنظیم نشود، تست‌ها به هم پیوند نخواهند خورد.
